# ИНСТРУКЦИЯ ПО ЗАПУСКУ ИНТЕГРИРОВАННОГО TELEGRAM БОТА

## Текущее состояние

✅ **Готово:**
- Код интегрированного бота создан (`/app/telegram_bot_integrated.js`)
- Токен бота настроен в .env файле
- Backend API endpoints добавлены для интеграции
- Зависимости установлены

## Что сделано

### 1. Гибридная система аутентификации
- Email регистрация (основная)
- Telegram вход как альтернатива
- Связывание аккаунтов между сайтом и ботом

### 2. Функции бота
- **Авторизация на сайте** - пользователи могут войти через Telegram
- **Реферальная система** - +100₽ за каждого приглашенного
- **Покупка услуг** - ординар, двойник, экспресс, VIP
- **Баланс и профиль** - управление аккаунтом
- **Связь с сайтом** - автоматическое связывание аккаунтов

### 3. Интеграция с сайтом
- При нажатии "Войти через Telegram" на сайте:
  1. Открывается бот в Telegram
  2. Пользователь подтверждает вход
  3. Автоматически входит на сайт

## Запуск бота

1. **Сейчас запустить** (для тестирования):
```bash
cd /app
node telegram_bot_integrated.js
```

2. **Продакшн запуск** (рекомендую):
```bash
npm install -g pm2
pm2 start telegram_bot_integrated.js --name "telegram-bot"
```

## Настройка email (выберите один вариант)

### Вариант 1: Gmail (рекомендую)
- Бесплатно: 500 писем/день
- Инструкция в файле `/app/EMAIL_SETUP_GUIDE.md`

### Вариант 2: SendGrid (проще настроить)
1. Регистрация на https://sendgrid.com/
2. Создание API Key
3. Добавить в .env:
```env
SENDGRID_API_KEY=ваш-api-key
SENDGRID_FROM_EMAIL=ваш-email@domain.com
```
4. Заменить в `/app/backend/routes/auth_mongo.js`:
```javascript
const { sendVerificationEmail, sendPasswordResetEmail } = require('../services/emailServiceSendGrid');
```

## Тестирование

1. Запустите бот
2. Откройте сайт
3. Нажмите "Войти через Telegram"
4. Подтвердите в боте

## Что нужно от вас

1. **Выберите email сервис** (Gmail или SendGrid)
2. **Настройте email** по инструкции
3. **Запустите бота** командой выше
4. **Протестируйте** интеграцию

Готовы приступить? Какой email сервис выберете?