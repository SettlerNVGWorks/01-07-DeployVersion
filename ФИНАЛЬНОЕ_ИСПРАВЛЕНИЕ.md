# üéØ –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Node.js 20 + –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è Node.js:**
   - Backend: Node.js 18 ‚Üí Node.js 20
   - Frontend: Node.js 18 ‚Üí Node.js 20
   - –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞–∫–µ—Ç–æ–º `undici` (—Ç—Ä–µ–±—É–µ—Ç Node.js ‚â•20.18.1)

2. **–î–æ–±–∞–≤–ª–µ–Ω—ã engines –≤ package.json:**
   - –£–∫–∞–∑–∞–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Node.js ‚â•20.0.0
   - –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

3. **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã yarn.lock:**
   - –ù–æ–≤—ã–µ lockfile —Å —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
   - –£–±—Ä–∞–Ω—ã –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

---

# üöÄ –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–ê–Ø –ö–û–ú–ê–ù–î–ê –î–õ–Ø –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø

## ‚ú® –°–ø–æ—Å–æ–± 1: –°—É–ø–µ—Ä-–±—ã—Å—Ç—Ä—ã–π (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@185.174.136.113

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≠–¢–£ –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
curl -fsSL https://get.docker.com | sh && \
sudo usermod -aG docker $USER && \
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose && \
sudo chmod +x /usr/local/bin/docker-compose && \
sudo apt update && sudo apt install -y git && \
rm -rf sport-predictions && \
git clone https://github.com/SettlerNVGWorks/01-07-DeployVersion sport-predictions && \
cd sport-predictions && \
chmod +x deploy-ip.sh && \
./deploy-ip.sh
```

**–ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ Docker –≥—Ä—É–ø–ø–µ:**
```bash
exit
ssh root@185.174.136.113
cd sport-predictions && ./deploy-ip.sh
```

## üîß –°–ø–æ—Å–æ–± 2: –ü–æ—à–∞–≥–æ–≤—ã–π (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å)

```bash
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@185.174.136.113

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
sudo apt update && sudo apt install -y git

# 4. –ü–µ—Ä–µ–∑–∞–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
exit
ssh root@185.174.136.113

# 5. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
rm -rf sport-predictions
git clone https://github.com/SettlerNVGWorks/01-07-DeployVersion sport-predictions
cd sport-predictions
chmod +x deploy-ip.sh
./deploy-ip.sh
```

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:

- **üåê –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç:** http://185.174.136.113
- **üîß API –∑–¥–æ—Ä–æ–≤—å—è:** http://185.174.136.113/api/health
- **üìä Nginx —Å—Ç–∞—Ç—É—Å:** http://185.174.136.113/health

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –£–°–ü–ï–®–ù–û–ì–û –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
docker-compose ps

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ 4 —Å–µ—Ä–≤–∏—Å–∞ –∫–∞–∫ "running":
# NAME                              COMMAND                  SERVICE     STATUS
# sport_predictions_backend         "docker-entrypoint.s‚Ä¶"   backend     running
# sport_predictions_frontend        "/docker-entrypoint.‚Ä¶"   frontend    running
# sport_predictions_mongodb         "docker-entrypoint.s‚Ä¶"   mongodb     running
# sport_predictions_nginx           "/docker-entrypoint.‚Ä¶"   nginx       running
```

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API:
curl http://localhost/api/health
# –û—Ç–≤–µ—Ç: {"status":"ok","timestamp":"2025-01-01T..."}

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–π—Ç:
curl http://localhost
# –û—Ç–≤–µ—Ç: HTML –∫–æ–¥ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

---

## üìä –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ï–ö–¢–û–ú

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs backend
docker-compose logs frontend
docker-compose logs nginx
docker-compose logs mongodb
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart backend

# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker-compose down && docker-compose up -d --build
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
ssh root@185.174.136.113
cd sport-predictions

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull

# –û–±–Ω–æ–≤–∏—Ç—å —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker-compose down
docker-compose up -d --build --force-recreate
```

---

## üö® –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose down
docker system prune -a -f
docker-compose up -d --build --force-recreate
```

### –ï—Å–ª–∏ –ø–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80
sudo netstat -tulpn | grep :80

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–π nginx
sudo systemctl stop nginx
sudo systemctl disable nginx
```

### –ï—Å–ª–∏ Docker –≥—Ä—É–ø–ø–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
# –ü–µ—Ä–µ–∑–∞–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
exit
ssh root@185.174.136.113

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—ã
groups
# –î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å "docker"
```

---

## üéâ –§–ò–ù–ê–õ–¨–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ü–†–û–ï–ö–¢–ï:

- ‚úÖ **Node.js**: 18 ‚Üí 20 (backend –∏ frontend)
- ‚úÖ **package.json**: –¥–æ–±–∞–≤–ª–µ–Ω—ã engines —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ‚úÖ **yarn.lock**: –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ **Dockerfile**: –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ Node.js 20
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: —Ä–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å undici

---

## üéØ –¢–ï–ü–ï–†–¨ 100% –ì–û–¢–û–í–û –ö –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ!

–ü—Ä–æ–±–ª–µ–º–∞ —Å Node.js –≤–µ—Ä—Å–∏–µ–π —Ä–µ—à–µ–Ω–∞.
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã.
Docker —Å–±–æ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ.

**–í–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:** http://185.174.136.113 ‚ú®

üöÄ **–ó–ê–ü–£–°–ö–ê–ô–¢–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï!**