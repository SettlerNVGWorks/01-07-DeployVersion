# üõ†Ô∏è –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ yarn.lock —Ñ–∞–π–ª—ã

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

1. **–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã yarn.lock —Ñ–∞–π–ª—ã:**
   - –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ yarn.lock
   - –°–æ–∑–¥–∞–Ω—ã –Ω–æ–≤—ã–µ yarn.lock —Ñ–∞–π–ª—ã
   - –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `crypto`

2. **–û–±–Ω–æ–≤–ª–µ–Ω—ã Dockerfile:**
   - –£–±—Ä–∞–Ω —Ñ–ª–∞–≥ `--frozen-lockfile` (–¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏)
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ Docker cache
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

---

# üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø

## –°–ø–æ—Å–æ–± 1: –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
ssh root@185.174.136.113

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
curl -fsSL https://get.docker.com | sh && \
sudo usermod -aG docker $USER && \
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose && \
sudo chmod +x /usr/local/bin/docker-compose && \
sudo apt update && sudo apt install -y git && \
rm -rf sport-predictions && \
git clone https://github.com/SettlerNVGWorks/01-07-DeployVersion sport-predictions && \
cd sport-predictions && \
chmod +x deploy-ip.sh && \
./deploy-ip.sh
```

**–ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ Docker –≥—Ä—É–ø–ø–µ:**
```bash
exit
ssh root@185.174.136.113
cd sport-predictions && ./deploy-ip.sh
```

## –°–ø–æ—Å–æ–± 2: –ü–æ—à–∞–≥–æ–≤—ã–π

```bash
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@185.174.136.113

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (–æ–¥–∏–Ω —Ä–∞–∑)
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
sudo apt update && sudo apt install -y git

# 4. –ü–µ—Ä–µ–∑—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
exit
ssh root@185.174.136.113

# 5. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
rm -rf sport-predictions
git clone https://github.com/SettlerNVGWorks/01-07-DeployVersion sport-predictions
cd sport-predictions
chmod +x deploy-ip.sh
./deploy-ip.sh
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

- **üåê –°–∞–π—Ç:** http://185.174.136.113
- **üîß API:** http://185.174.136.113/api/health
- **üìä –°—Ç–∞—Ç—É—Å:** http://185.174.136.113/health

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∫–∞–∫ "running":
# sport_predictions_backend     running
# sport_predictions_frontend    running  
# sport_predictions_mongodb     running
# sport_predictions_nginx       running
```

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API
curl http://localhost/api/health
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: {"status":"ok","timestamp":"..."}

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
curl http://localhost
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å HTML –∫–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
ssh root@185.174.136.113
cd sport-predictions

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull

# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å —á–∏—Å—Ç–æ–π —Å–±–æ—Ä–∫–æ–π
docker-compose down
docker system prune -f
docker-compose up -d --build --force-recreate
```

---

## üö® –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ Docker:
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
docker-compose down

# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –æ–±—Ä–∞–∑—ã –∏ –∫–µ—à
docker system prune -a -f
docker builder prune -a -f

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –Ω—É–ª—è
docker-compose up -d --build --force-recreate
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs backend
docker-compose logs frontend
```

### –ï—Å–ª–∏ –ø–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç
sudo netstat -tulpn | grep :80

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π nginx
sudo systemctl stop nginx
sudo systemctl disable nginx
```

---

## ‚úÖ –û–ë–ù–û–í–õ–ï–ù–ò–Ø –í –ö–û–î–ï:

1. **backend/package.json** - —É–±—Ä–∞–Ω –ø–∞–∫–µ—Ç `crypto`
2. **backend/yarn.lock** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
3. **frontend/yarn.lock** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω  
4. **backend/Dockerfile** - —É–±—Ä–∞–Ω `--frozen-lockfile`
5. **frontend/Dockerfile** - —É–±—Ä–∞–Ω `--frozen-lockfile`
6. **deploy-ip.sh** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞

---

## üéâ –¢–ï–ü–ï–†–¨ –í–°–ï –î–û–õ–ñ–ù–û –†–ê–ë–û–¢–ê–¢–¨!

Yarn.lock —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å package.json.
Docker —Å–±–æ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –±–µ–∑ –æ—à–∏–±–æ–∫.

**–í–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:** http://185.174.136.113 üöÄ