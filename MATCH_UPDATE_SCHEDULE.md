# Автоматическое обновление матчей

## Описание
Система автоматически обновляет матчи каждый день в 12:00 по московскому времени.

## Расписание
- **Обновление матчей**: 12:00 МСК каждый день
- **Очистка старых матчей**: 00:00 МСК каждый день
- **Количество матчей**: По 2 матча на каждый вид спорта (всего 8 матчей)

## Виды спорта
- Футбол (2 матча)
- Хоккей (2 матча) 
- Бейсбол (2 матча)
- Киберспорт (2 матча)

## API Endpoints

### GET /api/matches/schedule-info
Информация о расписании обновления
```json
{
  "success": true,
  "schedule": {
    "dailyMatchUpdate": "12:00 МСК каждый день",
    "oldMatchCleanup": "00:00 МСК каждый день",
    "timezone": "Europe/Moscow"
  },
  "nextUpdate": {
    "date": "2025-06-29T12:00:00.000Z",
    "timeUntil": "0ч 29м",
    "timestamp": 1751198400000
  }
}
```

### POST /api/matches/update-daily
Ручное обновление матчей (для тестирования)
```bash
curl -X POST http://localhost:8001/api/matches/update-daily
```

### GET /api/matches/today
Получить все матчи на сегодня
```bash
curl http://localhost:8001/api/matches/today
```

## Как это работает

1. **Автоматическое обновление**: Каждый день в 12:00 МСК система:
   - Удаляет сегодняшние матчи из базы
   - Генерирует 8 новых матчей (по 2 на каждый вид спорта)
   - Случайно выбирает команды из предустановленных списков
   - Генерирует реалистичные коэффициенты
   - Добавляет экспертные анализы
   - Сохраняет в базу данных

2. **Очистка старых данных**: В полночь система удаляет матчи старше одного дня

3. **Кеширование**: Матчи кешируются на 30 минут для оптимизации

## Особенности генерации

- **Команды**: Используются реальные команды для каждого вида спорта
- **Время матчей**: Генерируется случайно между 16:00 и 21:59
- **Коэффициенты**: Реалистичные значения от 1.4 до 3.4
- **Анализы**: Случайно выбираются из базы экспертных анализов
- **Ничья**: Только для футбола (коэффициенты от 2.8 до 3.8)

## Логирование

Все операции логируются в консоль backend:
- Запуск ежедневного обновления
- Количество сгенерированных матчей
- Статус сохранения в базу
- Ошибки при обновлении

## Мониторинг

Для проверки работы системы используйте:
```bash
# Проверить информацию о расписании
curl http://localhost:8001/api/matches/schedule-info

# Проверить текущие матчи
curl http://localhost:8001/api/matches/today

# Ручное обновление (тестирование)
curl -X POST http://localhost:8001/api/matches/update-daily
```